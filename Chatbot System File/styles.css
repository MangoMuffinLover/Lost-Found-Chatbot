/* School-friendly minimalist styles */
:root {
  --bg: #f7f9fc;
  --surface: #ffffff;
  --bot: #e8f0fe; /* soft blue */
  --user: #ffffff;
  --text: #1f2937; /* slate-800 */
  --muted: #6b7280; /* slate-500 */
  --accent: #3b82f6; /* blue-500 */
  --shadow: 0 10px 30px rgba(17, 24, 39, 0.08);
  /* Cute mascot avatar (inline SVG) */
  --bot-avatar: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='64' height='64' viewBox='0 0 64 64'><rect width='64' height='64' rx='16' fill='%23e8f0fe'/><circle cx='32' cy='32' r='20' fill='%23ffe9b3'/><path d='M18 26c4-6 8-8 14-8s10 2 14 8' stroke='%23333333' stroke-width='2' fill='none' stroke-linecap='round'/><circle cx='24' cy='34' r='3' fill='%23333333'/><circle cx='40' cy='34' r='3' fill='%23333333'/><path d='M26 42c2 2 10 2 12 0' stroke='%23333333' stroke-width='2' fill='none' stroke-linecap='round'/></svg>");
}

* { box-sizing: border-box; }
html, body { height: 100%; }
body {
  margin: 0;
  font-family: system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--text);
  background: var(--bg);
}

.page-bg {
  position: fixed;
  inset: 0;
  /* Use provided background image behind chatbot */
  background-image: linear-gradient(rgba(255,255,255,0.35), rgba(255,255,255,0.35)), url('assets/chatbot-bg.jpg');
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  background-attachment: fixed;
  pointer-events: none;
}

.chatbot-wrapper {
  max-width: 520px;
  margin: 40px auto;
  background: rgba(255, 255, 255, 0.88);
  border-radius: 18px;
  box-shadow: var(--shadow);
  overflow: hidden;
  border: 1px solid #eef2f7;
  backdrop-filter: blur(3px);
}

.chat-header {
  padding: 16px 20px;
  border-bottom: 1px solid #eef2f7;
  background: #fafafa;
}

.brand {
  display: flex; align-items: center; gap: 10px;
  font-weight: 700; letter-spacing: 0.2px;
}
.brand-avatar {
  width: 28px; height: 28px; border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}
.brand-avatar[src=""
] { display: inline-block; }

.chat-window {
  padding: 18px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  height: 54vh;
  min-height: 360px;
  overflow-y: auto;
  scroll-behavior: smooth;
}

.message {
  max-width: 85%;
  padding: 12px 14px;
  border-radius: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04);
  line-height: 1.3;
  opacity: 0;
  transform: translateY(8px);
  animation: popIn 300ms ease forwards;
  position: relative;
}

.message.bot {
  align-self: flex-start;
  background: var(--bot);
  margin-left: 38px; /* space for avatar */
}
.message.bot::before {
  content: "";
  position: absolute; left: -38px; top: 4px;
  width: 28px; height: 28px; border-radius: 50%;
  background-image: var(--bot-avatar);
  background-size: cover; background-position: center; background-repeat: no-repeat;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
}

.message.user {
  align-self: flex-end;
  background: var(--user);
  border: 1px solid #edf2ff;
}

.typing {
  display: inline-flex;
  gap: 3px;
}
.dot {
  width: 6px; height: 6px; border-radius: 50%; background: #94a3b8;
  animation: bounce 1000ms infinite ease-in-out;
}
.dot:nth-child(2) { animation-delay: 150ms; }
.dot:nth-child(3) { animation-delay: 300ms; }

@keyframes bounce {
  0%, 80%, 100% { transform: translateY(0); opacity: 0.5; }
  40% { transform: translateY(-4px); opacity: 1; }
}

@keyframes popIn {
  to { opacity: 1; transform: translateY(0); }
}

.chat-input {
  display: flex;
  gap: 10px;
  padding: 14px;
  border-top: 1px solid #eef2f7;
  background: #fafafa;
}

.chat-input input {
  flex: 1;
  padding: 12px 14px;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  background: #fff;
  font-size: 16px;
  outline: none;
}

.chat-input input:focus { border-color: #c7d2fe; box-shadow: 0 0 0 3px rgba(59,130,246,0.15); }

.chat-input button {
  padding: 12px 16px;
  border-radius: 12px;
  border: none;
  background: var(--accent);
  color: #fff;
  font-weight: 600;
  cursor: pointer;
}

.chat-input button:disabled { opacity: 0.7; cursor: default; }

.chat-footer { padding: 10px 16px; color: var(--muted); font-size: 12px; }

/* Small screens */
@media (max-width: 560px) {
  .chatbot-wrapper { margin: 0; border-radius: 0; height: 100vh; }
  .chat-window { height: calc(100vh - 150px); }
}